<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <title>Instructor Classes</title>
</head>
<body>
    <h1>This is instructor classes page, you can see your classes and student's detail here</h1>
    <a href="/"> Go Back To Home</a>

    <h3>Your Class: </h3>
    <% for(var i = 0; i<teachingClasses.length; i++){ %>
        <div>
            <h3><%=teachingClasses[i].course_fullname%> <%=teachingClasses[i].course_shortname%> <%=teachingClasses[i].section%> </h3>
            <%= teachingClasses[i].schedule[0].day%> <%= teachingClasses[i].schedule[0].startTime%> <%= teachingClasses[i].schedule[0].endTime%> 
                    <%= teachingClasses[i].schedule[1].day%> <%= teachingClasses[i].schedule[1].startTime%>-<%= teachingClasses[i].schedule[1].endTime%>
            
            <table>
                <tr>
                    <th>Student_Name</th>
                    <th>Student_Email</th>
                    <th>Grade_Received</th>
                    <th>Actions</th>
                </tr> 
                <% for(var j = 0; j<teachingClasses[i].students.length; j++){ %>
                    <form action="/instructorMyClasses", method="post">
                        <input type="hidden" name="studentName" value= "<%= teachingClasses[i].students[j].fullname %>" >
                        <input type="hidden" name="studentEmail" value= "<%= teachingClasses[i].students[j].email %>" >
                        <input type="hidden" name="classID" value= "<%= teachingClasses[i]._id %>" >
                        <input type="hidden" name="className" value= "<%= teachingClasses[i].course_shortname %>" >
                        <input type="hidden" name="classCredit" value= "<%= teachingClasses[i].credit %>" >
                        <input type="hidden" name="classYear" value= "<%= teachingClasses[i].year %>" >
                        <input type="hidden" name="classSemester" value= "<%= teachingClasses[i].semester %>" >

                        <tr>
                            <th><%= teachingClasses[i].students[j].fullname %></th>
                            <th><%= teachingClasses[i].students[j].email %></th>
                            <th><%= teachingClasses[i].students[j].grade %></th>
                            <th>
                                <button type="submit" name="action" value="record"> Check Record </button>
                                <% if(period == "grading"){ %>
                                    <button type="submit" name="action" value="grading"> Grading </button>
                                <% } %>
                                
                            <th>
                        </tr>
                    </form>
                <%} %>
            </table>
            <%if (teachingClasses[i].wait_list.length > 0){%>
                <h3>Wait list:</h3>
                <table>
                    <tr>
                        <th>Student_Name </th>
                        <th>Student_Email</th>
                        <th>Actions</th>
                    </tr>
                    <%for(var j = 0; j<teachingClasses[i].wait_list.length; j++){%>
                        <form action="/instructorMyClasses", method="post">
                            <input type="hidden" name="studentName" value= "<%= teachingClasses[i].wait_list[j].fullname %>" >
                            <input type="hidden" name="studentEmail" value= "<%= teachingClasses[i].wait_list[j].email %>" >
                            <input type="hidden" name="classID" value= "<%= teachingClasses[i]._id %>" >
                            <input type="hidden" name="className" value= "<%= teachingClasses[i].course_shortname %>" >
                            <input type="hidden" name="classCredit" value= "<%= teachingClasses[i].credit %>" >
                            <input type="hidden" name="classYear" value= "<%= teachingClasses[i].year %>" >
                            <input type="hidden" name="classSemester" value= "<%= teachingClasses[i].semester %>" >
    
                            <tr>
                                <th><%= teachingClasses[i].wait_list[j].fullname %></th>
                                <th><%= teachingClasses[i].wait_list[j].email %></th>
                                <th>
                                    <button type="submit" name="action" value="record"> Check Record </button>
                                    <button type="submit" name="action" value="approve"> Approve </button>
                                    <button type="submit" name="action" value="reject"> Reject </button>
                                <th>
                            </tr>
                        </form>
                    <%}%>
                </table>
            <%}%>

        </div>
        <hr>
    <%}%>
</body>
</html>